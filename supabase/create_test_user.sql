-- Создание тестового пользователя для импорта контактов
-- Этот пользователь будет владельцем всех импортированных контактов

-- Сначала проверим, существует ли тестовый пользователь
DO $$
DECLARE
    test_user_id UUID := '00000000-0000-0000-0000-000000000001';
BEGIN
    -- Удаляем старого тестового пользователя, если существует
    DELETE FROM пользователи WHERE идентификатор = test_user_id;
    
    -- Создаем тестового пользователя
    INSERT INTO пользователи (
        идентификатор,
        электронная_почта,
        имя,
        фамилия,
        процесс_адаптации_завершен,
        is_discoverable
    ) VALUES (
        test_user_id,
        'import_test@system.local',
        'Тестовый',
        'Пользователь',
        true,
        false
    );
    
    RAISE NOTICE 'Тестовый пользователь создан с ID: %', test_user_id;
END $$;

-- Вывести информацию о тестовом пользователе
SELECT 
    идентификатор,
    электронная_почта,
    имя,
    фамилия
FROM пользователи
WHERE электронная_почта = 'import_test@system.local';
